需求分析
在双十一时某东某宝半价抢 100 个 IPhone 的活动这样一个活动实际上时一个巨大的活动流量入口。并且由于秒杀的特殊性导致了一个可以预测的突发流量。
我们假设这场活动大概会吸引总共5kw的用户流量，这些用户并不都会最终来参与秒杀，并带来100w的秒杀并发。而活动的目的是为了吸引流量并讲流量引导至其它活动带来购买行为。
那么这样一个秒杀活动我们首先要考虑如何承载这5kw的流量，然后在来考虑100w并发如何完成抢100台IPhone。

系统设计
1.首先我们需要解决5000w访问，因为这5kw的用户流量并不是同时并发的而是通过广告导流逐步访问的因此，并且在活动开始前活动的页面其实就是个静态展示页面介绍活动信息而已，因此我考虑设计采用SLB方式搭配NGINX部署多台html静态页的网页服务器，并将静态资源部署到CDN服务中。
2.秒杀活动开始前1天对页面进行更新部署活动的真实抢购页面同样采用静态页方式，抢购的操作部分采用ajax接口与抢购后台进行对接。
3.秒杀活动的流程采用名额与购买过程分开的方式，用户获得名额后走商城原有的商品购买流程。通过抢购成功时得到的订单号进行地址填写和下单。
4.秒杀的后台实现，后台采用Redis队列方式，我们预先生成50w的长度队列，并将100个预先生成的订单号以一定先后比例放入到这50w的队列中，用户点击秒杀时将会从redis队列中取得一个值如果取得的不是订单号就表示没有抢购成功，如果取得了订单号那么就表示成功完成了秒杀